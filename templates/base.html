<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}La Tour - Plateforme de Mentorat{% endblock %}</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="{{ url_for('index') }}" class="logo-link">
                    <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="La Tour" class="logo-img">
                    <h1>La Tour</h1>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="{{ url_for('index') }}">Accueil</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Mentorat â–¼</a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url_for('mentors') }}">ðŸ‘¥ Trouver un mentor</a></li>
                        <li><a href="{{ url_for('devenir_mentor') }}">ðŸŽ“ Devenir mentor</a></li>
                    </ul>
                </li>
                <li><a href="{{ url_for('mes_rdv') }}">Mes rendez-vous</a></li>
                <li><a href="{{ url_for('chatbot') }}">Chatbot IA</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 La Tour - La Plateforme Marseille</p>
        </div>
    </footer>

    <script>
        // Animation des compteurs
        document.addEventListener('DOMContentLoaded', function() {
            const statNumbers = document.querySelectorAll('.stat-number');
            
            const animateCounter = (element) => {
                const target = parseInt(element.getAttribute('data-target'));
                const duration = 2000;
                const step = target / (duration / 16);
                let current = 0;
                
                const timer = setInterval(() => {
                    current += step;
                    if (current >= target) {
                        element.textContent = target + '+';
                        clearInterval(timer);
                    } else {
                        element.textContent = Math.floor(current);
                    }
                }, 16);
            };
            
            // Observer pour dÃ©clencher l'animation quand visible
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            
            statNumbers.forEach(stat => observer.observe(stat));
            
            // Gestion du dropdown mobile
            const dropdowns = document.querySelectorAll('.dropdown');
            dropdowns.forEach(dropdown => {
                const toggle = dropdown.querySelector('.dropdown-toggle');
                if (toggle) {
                    toggle.addEventListener('click', function(e) {
                        if (window.innerWidth <= 768) {
                            e.preventDefault();
                            dropdown.classList.toggle('active');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>